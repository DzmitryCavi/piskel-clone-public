!function(t){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],f=0,p=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(u&&u(e);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={0:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([65,1]),n()}({24:function(t,e,n){var r=n(48);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},43:function(t,e,n){var r=n(44);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},44:function(t,e,n){},46:function(t,e,n){var r=n(47);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){var r=n(50);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},50:function(t,e,n){},51:function(t,e,n){var r=n(52);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},52:function(t,e,n){},53:function(t,e,n){var r=n(54);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},54:function(t,e,n){},55:function(t,e,n){var r=n(56);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},56:function(t,e,n){},57:function(t,e,n){var r=n(58);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},58:function(t,e,n){},63:function(t,e,n){var r=n(64);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,o);r.locals&&(t.exports=r.locals)},64:function(t,e,n){},65:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(26),i=n.n(a),s=n(18),c=n.n(s);c.a.initializeApp({apiKey:"AIzaSyAHcnMb05Ys-vGul04xXVNy8Lf01IcZoBs",authDomain:"piskel-clone-75946.firebaseapp.com",databaseURL:"https://piskel-clone-75946.firebaseio.com",projectId:"piskel-clone-75946",storageBucket:"piskel-clone-75946.appspot.com",messagingSenderId:"268864352650",appId:"1:268864352650:web:d0e7fbd8058cebaa085873",measurementId:"G-ZY897JER3F"}),c.a.analytics();var l=c.a;n(43);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=p(e).call(this,t))||"object"!==u(o)&&"function"!=typeof o?h(r):o).state={email:"",password:"",fireErrors:"",formTitle:"Login",loginBtn:!0},n.login=n.login.bind(h(n)),n.register=n.register.bind(h(n)),n.getAction=n.getAction.bind(h(n)),n.handleChange=n.handleChange.bind(h(n)),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),n=e,(r=[{key:"login",value:function(t){var e=this;t.preventDefault(),l.auth().signInWithEmailAndPassword(this.state.email,this.state.password).catch((function(t){e.setState({fireErrors:t.message})}))}},{key:"register",value:function(t){var e=this;t.preventDefault(),l.auth().createUserWithEmailAndPassword(this.state.email,this.state.password).catch((function(t){e.setState({fireErrors:t.message})}))}},{key:"getAction",value:function(t){"reg"===t?this.setState({formTitle:"Register New User",loginBtn:!1,fireErrors:""}):this.setState({formTitle:"Login",loginBtn:!0,fireErrors:""})}},{key:"handleChange",value:function(t){var e,n,r;this.setState((e={},n=t.target.name,r=t.target.value,n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e))}},{key:"render",value:function(){var t=this,e=this.state.fireErrors?o.a.createElement("div",{className:"Error"}," ",this.state.fireErrors," "):null,n=this.state.loginBtn?o.a.createElement("input",{className:"loginBtn",type:"submit",onClick:this.login,value:"Enter"}):o.a.createElement("input",{className:"loginBtn",type:"submit",onClick:this.register,value:"Register"}),r=this.state.loginBtn?o.a.createElement("button",{className:"registerBtn",onClick:function(){return t.getAction("reg")}},"Register"):o.a.createElement("button",{className:"registerBtn",onClick:function(){return t.getAction("login")}},"Login");return o.a.createElement("div",{className:"form_block"},o.a.createElement("div",{id:"title"},this.state.formTitle),o.a.createElement("div",{className:"body"},e,o.a.createElement("form",null,o.a.createElement("input",{type:"text",value:this.state.email,onChange:this.handleChange,name:"email"}),o.a.createElement("input",{type:"password",value:this.state.password,onChange:this.handleChange,name:"password"}),n),r))}}])&&f(n.prototype,r),a&&f(n,a),e}(r.Component);n(46);function y(t){if(this.isDraw){var e=this.state.canvasSize,n=this.state.matrixSize,r=e/n,o=Math.floor(t.nativeEvent.offsetX*n/e)*r,a=Math.floor(t.nativeEvent.offsetY*n/e)*r;this.ctx.lineTo(o,a),this.ctx.beginPath(),this.ctx.rect(o,a,r,r),this.ctx.fill(),this.ctx.moveTo(o,a)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(t){if(this.isDraw){var e=this.refs.canvas.getContext("2d"),n=parseInt(this.props.firstColor.slice(1,3),16),r=parseInt(this.props.firstColor.slice(3,5),16),o=parseInt(this.props.firstColor.slice(5,7),16),a=this.state.canvasSize,i=e.getImageData(0,0,a,a),s=t.nativeEvent.offsetX,c=t.nativeEvent.offsetY,l=[[s,c]],u=e.getImageData(s,c,1,1),f=d(u.data,1)[0],p=d(u.data,1)[0],h=d(u.data,1)[0];if(n!==f||r!==p||o!==h)new Promise((function(t){for(;l.length;){var e=void 0,n=void 0,r=void 0,o=void 0,s=l.pop(),c=s[0];for(n=4*((e=d(s,2)[1])*a+c);e-- >=0&&m(n);)n-=4*a;for(n+=4*a,e+=1,r=!1,o=!1;e++<a-1&&m(n);)v(n),c>0&&(m(n-4)?r||(l.push([c-1,e]),r=!0):r&&(r=!1)),c<a-1&&(m(n+4)?o||(l.push([c+1,e]),o=!0):o&&(o=!1)),n+=4*a}t(i)})).then((function(t){e.putImageData(t,0,0)}))}function m(t){var e=i.data[t],n=i.data[t+1],r=i.data[t+2];return e===f&&n===p&&r===h}function v(t){i.data[t]=n,i.data[t+1]=r,i.data[t+2]=o,i.data[t+3]=255}}function g(t){if(this.isDraw){var e=this.ctx.getImageData(t.nativeEvent.offsetX,t.nativeEvent.offsetY,1,1),n=e.data[0].toString(16).toUpperCase(),r=e.data[1].toString(16).toUpperCase(),o=e.data[2].toString(16).toUpperCase();n=1===n.length?n+n:n,r=1===r.length?r+r:r,o=1===o.length?o+o:o,this.props.changeFirstColor("#".concat(n).concat(r).concat(o))}}function w(t,e,n){if(this.isDraw){var r=this.state.canvasSize,o=this.state.matrixSize,a=r/o,i=this.refs.additional.getContext("2d");i.fillStyle=this.props.firstColor,this.finishDrawX=[],this.finishDrawY=[],i.clearRect(0,0,r,r);var s=Math.floor(t.nativeEvent.offsetX),c=Math.floor(t.nativeEvent.offsetY);(function(t,e,n,r){var o,a,i,s,c,l,u,f=n-t,p=r-e,h=Math.abs(f),m=Math.abs(p);if(i=2*m-h,s=2*h-m,m<=h)for(f>=0?(o=t,a=e,c=n):(o=n,a=r,c=t),this.finishDrawX.push(o),this.finishDrawY.push(a),u=0;o<c;u+=1)o+=1,i<0?i+=2*m:(f<0&&p<0||f>0&&p>0?a+=1:a-=1,i+=2*(m-h)),this.finishDrawX.push(o),this.finishDrawY.push(a);else for(p>=0?(o=t,a=e,l=r):(o=n,a=r,l=e),this.finishDrawX.push(o),this.finishDrawY.push(a),u=0;a<l;u+=1)a+=1,s<=0?s+=2*h:(f<0&&p<0||f>0&&p>0?o+=1:o-=1,s+=2*(h-m)),this.finishDrawX.push(o),this.finishDrawY.push(a)}).call(this,e,n,s,c);for(var l=0;l<this.finishDrawX.length;l+=1){var u=Math.floor(this.finishDrawX[l]*o/r)*a,f=Math.floor(this.finishDrawY[l]*o/r)*a;i.fillRect(u,f,a,a)}}}function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=k(e).call(this,t))||"object"!==S(o)&&"function"!=typeof o?C(r):o).state={matrixSize:32,canvasSize:525},n.draw=n.draw.bind(C(n)),n.startPositionLine=n.startPositionLine.bind(C(n)),n.finishedPositionLine=n.finishedPositionLine.bind(C(n)),n.drawByPen=y.bind(C(n)),n.fillBucet=b.bind(C(n)),n.colorPicker=g.bind(C(n)),n.drawLine=w.bind(C(n)),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this.refs.canvas;this.isDraw=!1,this.ctx=t.getContext("2d"),this.ctx.fillStyle="#FFFFFF",this.ctx.strokeStyle="#000000",this.ctx.rect(0,0,this.state.canvasSize,this.state.canvasSize),this.ctx.stroke(),this.ctx.fill(),this.ctx.strokeStyle=this.props.firstColor,this.ctx.fillStyle=this.props.firstColor}},{key:"componentDidUpdate",value:function(t){t.matrixSize!==this.props.matrixSize&&this.setState({matrixSize:this.props.matrixSize});var e=this.refs.canvas.getContext("2d");t.firstColor!==this.props.firstColor&&(e.fillStyle=this.props.firstColor,e.strokeStyle=this.props.firstColor),t.img!==this.props.img&&e.putImageData(this.props.img,0,0)}},{key:"startPositionLine",value:function(t){switch(this.isDraw=!0,this.props.tool){case"line":return this.startDrawX=Math.floor(t.nativeEvent.offsetX),this.startDrawY=Math.floor(t.nativeEvent.offsetY),this.finishDrawX=[],this.finishDrawY=[],this.drawLine(t,this.startDrawX,this.startDrawY);case"eraser":this.ctx.fillStyle="#FFFFFF",this.ctx.strokeStyle="#FFFFFF";break;case"fill_bucet":return this.fillBucet(t);default:this.draw(t)}}},{key:"finishedPositionLine",value:function(){switch(this.isDraw=!1,this.props.tool){case"line":var t=this.refs.additional.getContext("2d"),e=this.state.canvasSize/this.state.matrixSize;t.clearRect(0,0,this.state.canvasSize,this.state.canvasSize);for(var n=0;n<this.finishDrawX.length;n++){var r=Math.floor(this.finishDrawX[n]*this.state.matrixSize/this.state.canvasSize)*e,o=Math.floor(this.finishDrawY[n]*this.state.matrixSize/this.state.canvasSize)*e;this.ctx.fillRect(r,o,e,e)}break;case"eraser":this.ctx.fillStyle=this.props.firstColor,this.ctx.strokeStyle=this.props.firstColor;break;default:this.ctx.beginPath()}var a=this.ctx.getImageData(0,0,this.state.canvasSize,this.state.canvasSize);this.props.setImg(a)}},{key:"draw",value:function(t){switch(this.props.tool){case"line":return this.drawLine(t,this.startDrawX,this.startDrawY);case"color_picker":return this.colorPicker(t);case"fill_bucet":case"rect":break;case"eraser":default:return this.drawByPen(t)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"canvas"},o.a.createElement("canvas",{ref:"canvas",width:"".concat(this.state.canvasSize,"px"),height:"".concat(this.state.canvasSize,"px")}),o.a.createElement("canvas",{ref:"additional",className:"additional_canvas",onMouseDown:this.startPositionLine,onMouseMove:this.draw,onMouseUp:this.finishedPositionLine,width:"".concat(this.state.canvasSize,"px"),height:"".concat(this.state.canvasSize,"px")}))}}])&&E(n.prototype,r),a&&E(n,a),e}(r.Component);n(24);function _(t){var e=t.tool,n=t.onClick;return o.a.createElement("button",{className:e.active?"".concat(e.id," active"):"".concat(e.id),onClick:function(){return n(e.id)},title:"".concat(e.id,"(").concat(e.id[0].toUpperCase(),")")})}n(49);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=N(e).call(this,t))||"object"!==j(o)&&"function"!=typeof o?P(r):o).state={tools:[{id:"pen",active:!0},{id:"line",active:!1},{id:"color_picker",active:!1},{id:"fill_bucet",active:!1},{id:"rect",active:!1},{id:"eraser",active:!1}]},n.clickTool=n.clickTool.bind(P(n)),n.changeFitstColor=n.changeFitstColor.bind(P(n)),n.changeSecondColor=n.changeSecondColor.bind(P(n)),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this;this.refs.firstColor.value="#FF0000",this.refs.secondColor.value="#0000FF",document.addEventListener("keydown",(function(e){switch(e.key){case"p":t.clickTool("pen");break;case"l":t.clickTool("line");break;case"c":t.clickTool("color_picker");break;case"f":t.clickTool("fill_bucet");break;case"r":t.clickTool("rect");break;case"e":t.clickTool("eraser")}}))}},{key:"componentDidUpdate",value:function(t){t.currentColor!==this.props.currentColor&&(this.refs.firstColor.value=this.props.currentColor)}},{key:"clickTool",value:function(t){var e=this;this.state.tools.map((function(n){n.id===t&&e.props.setTool(t)})),this.setState(this.state.tools.map((function(e){return e.active=e.id===t,e})))}},{key:"changeFitstColor",value:function(t){t.preventDefault(),this.props.changeFirstColor(t.target.value)}},{key:"changeSecondColor",value:function(t){t.preventDefault(),this.props.changeSecondColor(t.target.value)}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"Tools"},o.a.createElement("div",{className:"vertical-centerer"},o.a.createElement("div",{className:"pen-size-container"}),o.a.createElement("div",{className:"tools-container"},this.state.tools.map((function(e){return o.a.createElement(_,{tool:e,key:e.id,onClick:t.clickTool})}))),o.a.createElement("div",{className:"palette"},o.a.createElement("div",{className:"first-color"},o.a.createElement("input",{ref:"firstColor",type:"color",onChange:this.changeFitstColor})),o.a.createElement("div",{className:"second-color"},o.a.createElement("input",{ref:"secondColor",type:"color",onChange:this.changeSecondColor})))))}}])&&F(n.prototype,r),a&&F(n,a),e}(r.Component);n(51);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=z(e).call(this,t))||"object"!==T(o)&&"function"!=typeof o?M(r):o).click=n.click.bind(M(n)),n.showButtons=n.showButtons.bind(M(n)),n.hideButtons=n.hideButtons.bind(M(n)),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this.refs.img.getContext("2d");t.fillStyle="white",t.fillRect(0,0,525,525),this.props.img&&t.putImageData(this.props.img,0,0)}},{key:"componentDidUpdate",value:function(t){var e=this.refs.img.getContext("2d");this.props.img&&t.active===this.props.active&&e.putImageData(this.props.img,0,0)}},{key:"showButtons",value:function(){this.refs.delete.style="visibility: visible",this.refs.duplicate.style="visibility: visible"}},{key:"hideButtons",value:function(){this.refs.delete.removeAttribute("Style"),this.refs.duplicate.removeAttribute("Style")}},{key:"click",value:function(){var t=this.refs.img.getContext("2d");this.props.setFrame(t.getImageData(0,0,525,525))}},{key:"render",value:function(){return o.a.createElement("li",{onMouseOver:this.showButtons,onMouseLeave:this.hideButtons,className:this.props.active?"active":""},o.a.createElement("canvas",{ref:"img",width:"525",height:"525",onClick:this.click}),o.a.createElement("button",{ref:"delete",className:"delete-frame-btn",onClick:this.props.delFn,title:"delete this frame (D)"}),o.a.createElement("button",{ref:"duplicate",className:"duplicate-frame-btn",onClick:this.props.dpFn,title:"duplicate this frame (P) "}))}}])&&A(n.prototype,r),a&&A(n,a),e}(r.Component);n(53);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var J=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=U(e).call(this,t))||"object"!==B(o)&&"function"!=typeof o?K(r):o).state={frames:[{id:0,active:!0,img:null}]},n.frameCounter=0,n.addFrame=n.addFrame.bind(K(n)),n.deleteFrame=n.deleteFrame.bind(K(n)),n.images=[],n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this;this.setAnimation(),document.addEventListener("keydown",(function(e){var n=0;switch(t.state.frames.forEach((function(t){n=t.active?t.id:n})),e.key){case"n":t.addFrame();break;case"d":t.deleteFrame(n);break;case"p":t.duplicateFrame(n)}}))}},{key:"componentDidUpdate",value:function(t){var e=this;this.props.currentImage!==t.currentImage&&this.setState({frames:this.state.frames.map((function(t){return t.active?{id:t.id,active:!0,img:e.props.currentImage}:t}))},this.setAnimation),this.props.currentImage===t.currentImage&&this.images.length===this.state.frames.length||this.setAnimation()}},{key:"setAnimation",value:function(){var t=[];this.state.frames.forEach((function(e){t.push(e.img)})),this.images=t,this.props.setAnimation(t)}},{key:"addFrame",value:function(){var t=this;this.frameCounter+=1,this.setState((function(){return t.state.frames.push({id:t.frameCounter,active:!1,img:null})}))}},{key:"deleteFrame",value:function(t){this.setState({frames:this.state.frames.filter((function(e){return e.id!=t}))})}},{key:"duplicateFrame",value:function(t){var e=this;this.frameCounter+=1,this.state.frames.forEach((function(n,r,o){if(n.id===t){var a=X(o).slice(0);a.splice(r+1,0,{id:e.frameCounter,active:!1,img:n.img}),e.setState({frames:a})}}))}},{key:"clickFrame",value:function(t,e){this.props.setFrame(t,e),this.setState({frames:this.state.frames.map((function(e){return e.active=e.id===t,e}))})}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"frames"},o.a.createElement("div",{className:"frames-scroller"},o.a.createElement("ul",{className:"frames-llist"},this.state.frames.map((function(e){return o.a.createElement(R,{key:e.id,active:e.active,img:e.img,setFrame:function(n){t.clickFrame(e.id,n)},delFn:function(){t.deleteFrame(e.id)},dpFn:function(){t.duplicateFrame(e.id)}})})),o.a.createElement("div",{className:"add-frame",onClick:this.addFrame,title:"add new frame (N)"},"add new frame"))))}}])&&Y(n.prototype,r),a&&Y(n,a),e}(r.Component);n(55);function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=Z(e).call(this,t))||"object"!==G(o)&&"function"!=typeof o?q(r):o).state={fps:1,width:525,height:525},n.counter=0,n.Animation=n.Animation.bind(q(n)),n.changeFps=n.changeFps.bind(q(n)),n.fullSreen=n.fullSreen.bind(q(n)),n.saveAsFile=n.saveAsFile.bind(q(n)),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this;this.ctx=this.refs.canvas.getContext("2d"),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.width,this.height),this.timer=setInterval(this.Animation,1e3/this.state.fps),this.refs.fps.value=this.state.fps,document.addEventListener("keydown",(function(e){switch(e.key){case"s":t.saveAsFile()}}))}},{key:"stopAmination",value:function(){clearInterval(this.timer)}},{key:"Animation",value:function(){var t=this.refs.canvas.getContext("2d"),e=this.props.files[this.counter];e?t.putImageData(e,0,0):t.fillRect(0,0,this.state.height,this.state.width),this.counter=this.counter>=this.props.files.length-1?0:this.counter+1}},{key:"changeFps",value:function(t){this.stopAmination();var e=1e3/t.nativeEvent.target.value;this.timer=setInterval(this.Animation,e),this.setState({fps:t.nativeEvent.target.value})}},{key:"fullSreen",value:function(){this.refs.canvas.requestFullscreen()}},{key:"saveAsFile",value:function(){(function(){var t=[],e=1e3/this.state.fps*this.props.files.length,n=this.refs.canvas.captureStream(),r=new MediaRecorder(n);r.ondataavailable=function(e){return t.push(e.data)},r.onstop=function(e){return function(t){var e=document.createElement("a");e.download="animation.mp4",e.href=URL.createObjectURL(t);var n=document.createEvent("MouseEvents");n.initEvent("click"),e.dispatchEvent(n)}(new Blob(t,{type:"video/mp4"}))},r.start(),setTimeout((function(){return r.stop()}),e)}).call(this)}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"animation-container"},o.a.createElement("div",{className:"canvas-conteiner"},o.a.createElement("canvas",{ref:"canvas",id:"player",width:"525",height:"525"}),o.a.createElement("button",{className:"save-as-gif-btn",onClick:this.saveAsFile,title:"save file (S)"})),o.a.createElement("div",{className:"controls"},o.a.createElement("span",{className:"display-fps"},this.state.fps," fps"),o.a.createElement("input",{ref:"fps",id:"preview-fps",className:"range-fps",type:"range",min:"1",max:"24",onChange:this.changeFps}),o.a.createElement("button",{className:"fullSreen-btn",onClick:this.fullSreen}),o.a.createElement("button",{className:"resize-btn s16x16",onClick:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return t.props.changeMatrixSize(n)}},"32x32"),o.a.createElement("button",{className:"resize-btn s32x32",onClick:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;return t.props.changeMatrixSize(n)}},"64x64"),o.a.createElement("button",{className:"resize-btn s128x128",onClick:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128;return t.props.changeMatrixSize(n)}},"128x128")))}}])&&W(n.prototype,r),a&&W(n,a),e}(r.Component),$=n(17);n(57);function tt(t){return o.a.createElement("div",{className:"header"},o.a.createElement("a",{className:"piskel-logo",href:"#"}),o.a.createElement("div",{className:"piskel-user"},t.userName),o.a.createElement("div",{className:"nav-buttons nav-buttons-default"},t.isHome?o.a.createElement($.b,{className:"piskel-button",to:"/create"},"Create"):o.a.createElement("a",{className:"piskel-button  login-button",onClick:t.logout},"Log out")))}n(63);function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=rt(e).call(this,t))||"object"!==et(o)&&"function"!=typeof o?ot(r):o).showKeys=n.showKeys.bind(ot(n)),n.isShow=!1,n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,t),n=e,(r=[{key:"showKeys",value:function(){var t=this.refs.keycommands;this.isShow?(t.removeAttribute("style"),this.isShow=!1):(t.setAttribute("style","display: block"),this.isShow=!0)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{id:"keycommands",ref:"keycommands"},o.a.createElement("section",{className:"editor-commands"},o.a.createElement("h2",null,"Keyboard shortcuts"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"L - "),"Line"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"C - "),"Color picker"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"F - "),"Fill bucet"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"R - "),"Rectangle"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"E - "),"Eraser"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"N - "),"Add New frame"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"D - "),"Delete active frame"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"P - "),"Duplicate active frame"),o.a.createElement("div",{className:"key-group"},o.a.createElement("span",{className:"command"},"S - "),"Save animation"))),o.a.createElement("button",{className:"modal-btn",onClick:this.showKeys}))}}])&&nt(n.prototype,r),a&&nt(n,a),e}(r.Component);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pt=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(n=!(o=lt(e).call(this,t))||"object"!==st(o)&&"function"!=typeof o?ut(r):o).state={currentFrame:0,currentTool:"pen",currentCanvasImg:null,currentFrameImg:null,currentColors:{first:"#FF0000",second:"#0000FF"},currentAnimations:null,matrixSize:16},n.setTool=n.setTool.bind(ut(n)),n.setFrame=n.setFrame.bind(ut(n)),n.setImg=n.setImg.bind(ut(n)),n.changeFirstColor=n.changeFirstColor.bind(ut(n)),n.changeSecondColor=n.changeSecondColor.bind(ut(n)),n.setAnimation=n.setAnimation.bind(ut(n)),n.changeMatrixSize=n.changeMatrixSize.bind(ut(n)),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(e,t),n=e,(r=[{key:"setTool",value:function(t){this.setState({currentTool:t})}},{key:"setFrame",value:function(t,e){this.setState({currentFrame:t,currentFrameImg:e})}},{key:"setImg",value:function(t){this.setState({currentCanvasImg:t})}},{key:"changeFirstColor",value:function(t){this.setState({currentColors:{first:t,second:this.state.currentColors.second}})}},{key:"changeSecondColor",value:function(t){this.setState({currentColors:{first:this.state.currentColors.first,second:t}})}},{key:"setAnimation",value:function(t){this.setState({currentAnimations:t})}},{key:"changeMatrixSize",value:function(t){this.setState({matrixSize:t})}},{key:"logout",value:function(){l.auth().signOut()}},{key:"render",value:function(){return o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"header-wraper"},o.a.createElement(tt,{logout:this.logout,userName:this.props.userName})),o.a.createElement(I,{setTool:this.setTool,changeFirstColor:this.changeFirstColor,changeSecondColor:this.changeSecondColor,currentColor:this.state.currentColors.first}),o.a.createElement("div",{className:"column-wraper"},o.a.createElement("div",{className:"left-column"},o.a.createElement(J,{setFrame:this.setFrame,currentImage:this.state.currentCanvasImg,setAnimation:this.setAnimation})),o.a.createElement("div",{className:"mian-column"},o.a.createElement(x,{tool:this.state.currentTool,setImg:this.setImg,firstColor:this.state.currentColors.first,img:this.state.currentFrameImg,matrixSize:this.state.matrixSize,changeFirstColor:this.changeFirstColor})),o.a.createElement("div",{className:"right-column"},o.a.createElement(Q,{files:this.state.currentAnimations,changeMatrixSize:this.changeMatrixSize}))),o.a.createElement(it,null))}}])&&ct(n.prototype,r),a&&ct(n,a),e}(r.Component);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vt(this,yt(e).call(this,t))}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(e,t),n=e,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"header-wraper"},o.a.createElement(tt,{isHome:!0,userName:this.props.userName})),o.a.createElement("div",{className:"column-wraper"},o.a.createElement("div",{className:"left-column"}),o.a.createElement("div",{className:"mian-column"}),o.a.createElement("div",{className:"right-column"})))}}])&&mt(n.prototype,r),a&&mt(n,a),e}(r.Component),gt=n(10);function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Et(t,e){return!e||"object"!==wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ot=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Et(this,kt(e).call(this))).state={user:null},t}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var t=this;l.auth().onAuthStateChanged((function(e){e?t.setState({user:e}):t.setState({user:null})}))}},{key:"render",value:function(){var t=this;return o.a.createElement($.a,null,o.a.createElement(gt.c,null,o.a.createElement(gt.a,{exact:!0,path:"/",render:function(){return o.a.createElement(bt,null)}}),o.a.createElement(gt.a,{exact:!0,path:"/create",render:function(){return t.state.user?o.a.createElement(pt,{userName:t.state.user.email}):o.a.createElement(v,null)}})))}}])&&St(n.prototype,r),a&&St(n,a),e}(r.Component);i.a.render(o.a.createElement(Ot,null),document.getElementById("root"))}});