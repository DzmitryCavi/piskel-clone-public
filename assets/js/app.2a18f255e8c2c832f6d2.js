!function(e){function t(t){for(var r,i,s=t[0],c=t[1],l=t[2],f=0,p=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([65,1]),n()}({24:function(e,t,n){var r=n(48);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},43:function(e,t,n){var r=n(44);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},44:function(e,t,n){},46:function(e,t,n){var r=n(47);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){var r=n(50);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},50:function(e,t,n){},51:function(e,t,n){var r=n(52);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},52:function(e,t,n){},53:function(e,t,n){var r=n(54);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},54:function(e,t,n){},55:function(e,t,n){var r=n(56);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},56:function(e,t,n){},57:function(e,t,n){var r=n(58);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},58:function(e,t,n){},63:function(e,t,n){var r=n(64);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(r,a);r.locals&&(e.exports=r.locals)},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(26),i=n.n(o),s=n(19),c=n.n(s);c.a.initializeApp({apiKey:"AIzaSyAHcnMb05Ys-vGul04xXVNy8Lf01IcZoBs",authDomain:"piskel-clone-75946.firebaseapp.com",databaseURL:"https://piskel-clone-75946.firebaseio.com",projectId:"piskel-clone-75946",storageBucket:"piskel-clone-75946.appspot.com",messagingSenderId:"268864352650",appId:"1:268864352650:web:d0e7fbd8058cebaa085873",measurementId:"G-ZY897JER3F"});var l=c.a;n(43);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=p(t).call(this,e))||"object"!==u(a)&&"function"!=typeof a?m(r):a).state={email:"",password:"",fireErrors:"",formTitle:"Login",loginBtn:!0},n.login=n.login.bind(m(n)),n.register=n.register.bind(m(n)),n.getAction=n.getAction.bind(m(n)),n.handleChange=n.handleChange.bind(m(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"login",value:function(e){var t=this;e.preventDefault(),l.auth().signInWithEmailAndPassword(this.state.email,this.state.password).catch((function(e){t.setState({fireErrors:e.message})}))}},{key:"register",value:function(e){var t=this;e.preventDefault(),l.auth().createUserWithEmailAndPassword(this.state.email,this.state.password).catch((function(e){t.setState({fireErrors:e.message})}))}},{key:"getAction",value:function(e){"reg"===e?this.setState({formTitle:"Register New User",loginBtn:!1,fireErrors:""}):this.setState({formTitle:"Login",loginBtn:!0,fireErrors:""})}},{key:"handleChange",value:function(e){var t,n,r;this.setState((t={},n=e.target.name,r=e.target.value,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))}},{key:"render",value:function(){var e=this,t=this.state.fireErrors?a.a.createElement("div",{className:"Error"}," ",this.state.fireErrors," "):null,n=this.state.loginBtn?a.a.createElement("input",{className:"loginBtn",type:"submit",onClick:this.login,value:"Enter"}):a.a.createElement("input",{className:"loginBtn",type:"submit",onClick:this.register,value:"Register"}),r=this.state.loginBtn?a.a.createElement("button",{className:"registerBtn",onClick:function(){return e.getAction("reg")}},"Register"):a.a.createElement("button",{className:"registerBtn",onClick:function(){return e.getAction("login")}},"Login");return a.a.createElement("div",{className:"form_block"},a.a.createElement("div",{id:"title"},this.state.formTitle),a.a.createElement("div",{className:"body"},t,a.a.createElement("form",null,a.a.createElement("input",{type:"text",value:this.state.email,onChange:this.handleChange,name:"email"}),a.a.createElement("input",{type:"password",value:this.state.password,onChange:this.handleChange,name:"password"}),n),r))}}])&&f(n.prototype,r),o&&f(n,o),t}(r.Component);n(46);function y(e){if(this.isDraw){var t=this.state.canvasSize,n=this.state.matrixSize,r=t/n,a=Math.floor(e.nativeEvent.offsetX*n/t)*r,o=Math.floor(e.nativeEvent.offsetY*n/t)*r;this.ctx.lineTo(a,o),this.ctx.beginPath(),this.ctx.rect(a,o,r,r),this.ctx.fill(),this.ctx.moveTo(a,o)}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(e){if(this.isDraw){var t=this.refs.canvas.getContext("2d"),n=parseInt(this.props.firstColor.slice(1,3),16),r=parseInt(this.props.firstColor.slice(3,5),16),a=parseInt(this.props.firstColor.slice(5,7),16),o=this.state.canvasSize,i=t.getImageData(0,0,o,o),s=e.nativeEvent.offsetX,c=e.nativeEvent.offsetY,l=[[s,c]],u=t.getImageData(s,c,1,1),f=d(u.data,1)[0],p=d(u.data,1)[0],m=d(u.data,1)[0];if(n!==f||r!==p||a!==m)new Promise((function(e){for(;l.length;){var t=void 0,n=void 0,r=void 0,a=void 0,s=l.pop(),c=s[0];for(n=4*((t=d(s,2)[1])*o+c);t-- >=0&&h(n);)n-=4*o;for(n+=4*o,t+=1,r=!1,a=!1;t++<o-1&&h(n);)v(n),c>0&&(h(n-4)?r||(l.push([c-1,t]),r=!0):r&&(r=!1)),c<o-1&&(h(n+4)?a||(l.push([c+1,t]),a=!0):a&&(a=!1)),n+=4*o}e(i)})).then((function(e){t.putImageData(e,0,0)}))}function h(e){var t=i.data[e],n=i.data[e+1],r=i.data[e+2];return t===f&&n===p&&r===m}function v(e){i.data[e]=n,i.data[e+1]=r,i.data[e+2]=a,i.data[e+3]=255}}function g(e){if(this.isDraw){var t=this.ctx.getImageData(e.nativeEvent.offsetX,e.nativeEvent.offsetY,1,1),n=t.data[0].toString(16).toUpperCase(),r=t.data[1].toString(16).toUpperCase(),a=t.data[2].toString(16).toUpperCase();n=1===n.length?n+n:n,r=1===r.length?r+r:r,a=1===a.length?a+a:a,this.props.changeFirstColor("#".concat(n).concat(r).concat(a))}}function w(e,t,n){if(this.isDraw){var r=this.state.canvasSize,a=this.state.matrixSize,o=r/a,i=this.refs.additional.getContext("2d");i.fillStyle=this.props.firstColor,this.finishDrawX=[],this.finishDrawY=[],i.clearRect(0,0,r,r);var s=Math.floor(e.nativeEvent.offsetX),c=Math.floor(e.nativeEvent.offsetY);(function(e,t,n,r){var a,o,i,s,c,l,u,f=n-e,p=r-t,m=Math.abs(f),h=Math.abs(p);if(i=2*h-m,s=2*m-h,h<=m)for(f>=0?(a=e,o=t,c=n):(a=n,o=r,c=e),this.finishDrawX.push(a),this.finishDrawY.push(o),u=0;a<c;u+=1)a+=1,i<0?i+=2*h:(f<0&&p<0||f>0&&p>0?o+=1:o-=1,i+=2*(h-m)),this.finishDrawX.push(a),this.finishDrawY.push(o);else for(p>=0?(a=e,o=t,l=r):(a=n,o=r,l=t),this.finishDrawX.push(a),this.finishDrawY.push(o),u=0;o<l;u+=1)o+=1,s<=0?s+=2*m:(f<0&&p<0||f>0&&p>0?a+=1:a-=1,s+=2*(m-h)),this.finishDrawX.push(a),this.finishDrawY.push(o)}).call(this,t,n,s,c);for(var l=0;l<this.finishDrawX.length;l+=1){var u=Math.floor(this.finishDrawX[l]*a/r)*o,f=Math.floor(this.finishDrawY[l]*a/r)*o;i.fillRect(u,f,o,o)}}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=k(t).call(this,e))||"object"!==E(a)&&"function"!=typeof a?C(r):a).state={matrixSize:32,canvasSize:525},n.draw=n.draw.bind(C(n)),n.startPositionLine=n.startPositionLine.bind(C(n)),n.finishedPositionLine=n.finishedPositionLine.bind(C(n)),n.drawByPen=y.bind(C(n)),n.fillBucet=b.bind(C(n)),n.colorPicker=g.bind(C(n)),n.drawLine=w.bind(C(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.refs.canvas;this.isDraw=!1,this.ctx=e.getContext("2d"),this.ctx.fillStyle="#FFFFFF",this.ctx.strokeStyle="#000000",this.ctx.rect(0,0,this.state.canvasSize,this.state.canvasSize),this.ctx.stroke(),this.ctx.fill(),this.ctx.strokeStyle=this.props.firstColor,this.ctx.fillStyle=this.props.firstColor}},{key:"componentDidUpdate",value:function(e){e.matrixSize!==this.props.matrixSize&&this.setState({matrixSize:this.props.matrixSize});var t=this.refs.canvas.getContext("2d");e.firstColor!==this.props.firstColor&&(t.fillStyle=this.props.firstColor,t.strokeStyle=this.props.firstColor),e.img!==this.props.img&&t.putImageData(this.props.img,0,0)}},{key:"startPositionLine",value:function(e){switch(this.isDraw=!0,this.props.tool){case"line":return this.startDrawX=Math.floor(e.nativeEvent.offsetX),this.startDrawY=Math.floor(e.nativeEvent.offsetY),this.finishDrawX=[],this.finishDrawY=[],this.drawLine(e,this.startDrawX,this.startDrawY);case"eraser":this.ctx.fillStyle="#FFFFFF",this.ctx.strokeStyle="#FFFFFF";break;case"fill_bucet":return this.fillBucet(e);default:this.draw(e)}}},{key:"finishedPositionLine",value:function(){switch(this.isDraw=!1,this.props.tool){case"line":var e=this.refs.additional.getContext("2d"),t=this.state.canvasSize/this.state.matrixSize;e.clearRect(0,0,this.state.canvasSize,this.state.canvasSize);for(var n=0;n<this.finishDrawX.length;n++){var r=Math.floor(this.finishDrawX[n]*this.state.matrixSize/this.state.canvasSize)*t,a=Math.floor(this.finishDrawY[n]*this.state.matrixSize/this.state.canvasSize)*t;this.ctx.fillRect(r,a,t,t)}break;case"eraser":this.ctx.fillStyle=this.props.firstColor,this.ctx.strokeStyle=this.props.firstColor;break;default:this.ctx.beginPath()}var o=this.ctx.getImageData(0,0,this.state.canvasSize,this.state.canvasSize);this.props.setImg(o)}},{key:"draw",value:function(e){switch(this.props.tool){case"line":return this.drawLine(e,this.startDrawX,this.startDrawY);case"color_picker":return this.colorPicker(e);case"fill_bucet":case"rect":break;case"eraser":default:return this.drawByPen(e)}}},{key:"render",value:function(){return a.a.createElement("div",{className:"canvas"},a.a.createElement("canvas",{ref:"canvas",width:"".concat(this.state.canvasSize,"px"),height:"".concat(this.state.canvasSize,"px")}),a.a.createElement("canvas",{ref:"additional",className:"additional_canvas",onMouseDown:this.startPositionLine,onMouseMove:this.draw,onMouseUp:this.finishedPositionLine,width:"".concat(this.state.canvasSize,"px"),height:"".concat(this.state.canvasSize,"px")}))}}])&&S(n.prototype,r),o&&S(n,o),t}(r.Component);n(24);function _(e){var t=e.tool,n=e.onClick;return a.a.createElement("button",{className:t.active?"".concat(t.id," active"):"".concat(t.id),onClick:function(){return n(t.id)},title:"".concat(t.id,"(").concat(t.id[0].toUpperCase(),")")})}n(49);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=F(t).call(this,e))||"object"!==N(a)&&"function"!=typeof a?P(r):a).state={tools:[{id:"pen",active:!0},{id:"line",active:!1},{id:"color_picker",active:!1},{id:"fill_bucet",active:!1},{id:"rect",active:!1},{id:"eraser",active:!1}]},n.clickTool=n.clickTool.bind(P(n)),n.changeFitstColor=n.changeFitstColor.bind(P(n)),n.changeSecondColor=n.changeSecondColor.bind(P(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.refs.firstColor.value="#FF0000",this.refs.secondColor.value="#0000FF",document.addEventListener("keydown",(function(t){switch(t.key){case"p":e.clickTool("pen");break;case"l":e.clickTool("line");break;case"c":e.clickTool("color_picker");break;case"f":e.clickTool("fill_bucet");break;case"r":e.clickTool("rect");break;case"e":e.clickTool("eraser")}}))}},{key:"componentDidUpdate",value:function(e){e.currentColor!==this.props.currentColor&&(this.refs.firstColor.value=this.props.currentColor)}},{key:"clickTool",value:function(e){var t=this;this.state.tools.map((function(n){n.id===e&&t.props.setTool(e)})),this.setState(this.state.tools.map((function(t){return t.active=t.id===e,t})))}},{key:"changeFitstColor",value:function(e){e.preventDefault(),this.props.changeFirstColor(e.target.value)}},{key:"changeSecondColor",value:function(e){e.preventDefault(),this.props.changeSecondColor(e.target.value)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"Tools"},a.a.createElement("div",{className:"vertical-centerer"},a.a.createElement("div",{className:"pen-size-container"}),a.a.createElement("div",{className:"tools-container"},this.state.tools.map((function(t){return a.a.createElement(_,{tool:t,key:t.id,onClick:e.clickTool})}))),a.a.createElement("div",{className:"palette"},a.a.createElement("div",{className:"first-color"},a.a.createElement("input",{ref:"firstColor",type:"color",onChange:this.changeFitstColor})),a.a.createElement("div",{className:"second-color"},a.a.createElement("input",{ref:"secondColor",type:"color",onChange:this.changeSecondColor})))))}}])&&j(n.prototype,r),o&&j(n,o),t}(r.Component);n(51);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=z(t).call(this,e))||"object"!==I(a)&&"function"!=typeof a?M(r):a).click=n.click.bind(M(n)),n.showButtons=n.showButtons.bind(M(n)),n.hideButtons=n.hideButtons.bind(M(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.refs.img.getContext("2d");e.fillStyle="white",e.fillRect(0,0,525,525),this.props.img&&e.putImageData(this.props.img,0,0)}},{key:"componentDidUpdate",value:function(e){var t=this.refs.img.getContext("2d");this.props.img&&e.active===this.props.active&&t.putImageData(this.props.img,0,0)}},{key:"showButtons",value:function(){this.refs.delete.style="visibility: visible",this.refs.duplicate.style="visibility: visible"}},{key:"hideButtons",value:function(){this.refs.delete.removeAttribute("Style"),this.refs.duplicate.removeAttribute("Style")}},{key:"click",value:function(){var e=this.refs.img.getContext("2d");this.props.setFrame(e.getImageData(0,0,525,525))}},{key:"render",value:function(){return a.a.createElement("li",{onMouseOver:this.showButtons,onMouseLeave:this.hideButtons,className:this.props.active?"active":""},a.a.createElement("canvas",{ref:"img",width:"525",height:"525",onClick:this.click}),a.a.createElement("button",{ref:"delete",className:"delete-frame-btn",onClick:this.props.delFn,title:"delete this frame (D)"}),a.a.createElement("button",{ref:"duplicate",className:"duplicate-frame-btn",onClick:this.props.dpFn,title:"duplicate this frame (P) "}))}}])&&A(n.prototype,r),o&&A(n,o),t}(r.Component);n(53);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=U(t).call(this,e))||"object"!==B(a)&&"function"!=typeof a?K(r):a).state={frames:[{id:0,active:!0,img:null}]},n.frameCounter=0,n.addFrame=n.addFrame.bind(K(n)),n.deleteFrame=n.deleteFrame.bind(K(n)),n.images=[],n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.setAnimation(),document.addEventListener("keydown",(function(t){var n=0;switch(e.state.frames.forEach((function(e){n=e.active?e.id:n})),t.key){case"n":e.addFrame();break;case"d":e.deleteFrame(n);break;case"p":e.duplicateFrame(n)}}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.currentImage!==e.currentImage&&this.setState({frames:this.state.frames.map((function(e){return e.active?{id:e.id,active:!0,img:t.props.currentImage}:e}))},this.setAnimation),this.props.currentImage===e.currentImage&&this.images.length===this.state.frames.length||this.setAnimation()}},{key:"setAnimation",value:function(){var e=[];this.state.frames.forEach((function(t){e.push(t.img)})),this.images=e,this.props.setAnimation(e)}},{key:"addFrame",value:function(){var e=this;this.frameCounter+=1,this.setState((function(){return e.state.frames.push({id:e.frameCounter,active:!1,img:null})}))}},{key:"deleteFrame",value:function(e){this.setState({frames:this.state.frames.filter((function(t){return t.id!=e}))})}},{key:"duplicateFrame",value:function(e){var t=this;this.frameCounter+=1,this.state.frames.forEach((function(n,r,a){if(n.id===e){var o=X(a).slice(0);o.splice(r+1,0,{id:t.frameCounter,active:!1,img:n.img}),t.setState({frames:o})}}))}},{key:"clickFrame",value:function(e,t){this.props.setFrame(e,t),this.setState({frames:this.state.frames.map((function(t){return t.active=t.id===e,t}))})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"frames"},a.a.createElement("div",{className:"frames-scroller"},a.a.createElement("ul",{className:"frames-llist"},this.state.frames.map((function(t){return a.a.createElement(L,{key:t.id,active:t.active,img:t.img,setFrame:function(n){e.clickFrame(t.id,n)},delFn:function(){e.deleteFrame(t.id)},dpFn:function(){e.duplicateFrame(t.id)}})})),a.a.createElement("div",{className:"add-frame",onClick:this.addFrame,title:"add new frame (N)"},"add new frame"))))}}])&&Y(n.prototype,r),o&&Y(n,o),t}(r.Component);n(55);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=Z(t).call(this,e))||"object"!==J(a)&&"function"!=typeof a?q(r):a).state={fps:1,width:525,height:525},n.counter=0,n.Animation=n.Animation.bind(q(n)),n.changeFps=n.changeFps.bind(q(n)),n.fullSreen=n.fullSreen.bind(q(n)),n.saveAsFile=n.saveAsFile.bind(q(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.ctx=this.refs.canvas.getContext("2d"),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.width,this.height),this.timer=setInterval(this.Animation,1e3/this.state.fps),this.refs.fps.value=this.state.fps,document.addEventListener("keydown",(function(t){switch(t.key){case"s":e.saveAsFile()}}))}},{key:"componentWillUnmount",value:function(){this.stopAmination()}},{key:"stopAmination",value:function(){clearInterval(this.timer)}},{key:"Animation",value:function(){var e=this.refs.canvas.getContext("2d"),t=this.props.files[this.counter];t?e.putImageData(t,0,0):e.fillRect(0,0,this.state.height,this.state.width),this.counter=this.counter>=this.props.files.length-1?0:this.counter+1}},{key:"changeFps",value:function(e){this.stopAmination();var t=1e3/e.nativeEvent.target.value;this.timer=setInterval(this.Animation,t),this.setState({fps:e.nativeEvent.target.value})}},{key:"fullSreen",value:function(){this.refs.canvas.requestFullscreen()}},{key:"saveAsFile",value:function(){(function(){var e=[],t=1e3/this.state.fps*this.props.files.length,n=this.refs.canvas.captureStream(),r=new MediaRecorder(n);r.ondataavailable=function(t){return e.push(t.data)},r.onstop=function(t){return function(e){var t=document.createElement("a");t.download="animation.mp4",t.href=URL.createObjectURL(e);var n=document.createEvent("MouseEvents");n.initEvent("click"),t.dispatchEvent(n)}(new Blob(e,{type:"video/mp4"}))},r.start(),setTimeout((function(){return r.stop()}),t)}).call(this)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"animation-container"},a.a.createElement("div",{className:"canvas-conteiner"},a.a.createElement("canvas",{ref:"canvas",id:"player",width:"525",height:"525"}),a.a.createElement("button",{className:"save-as-gif-btn",onClick:this.saveAsFile,title:"save file (S)"})),a.a.createElement("div",{className:"controls"},a.a.createElement("span",{className:"display-fps"},this.state.fps," fps"),a.a.createElement("input",{ref:"fps",id:"preview-fps",className:"range-fps",type:"range",min:"1",max:"24",onChange:this.changeFps}),a.a.createElement("button",{className:"fullSreen-btn",onClick:this.fullSreen}),a.a.createElement("button",{className:"resize-btn s16x16",onClick:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return e.props.changeMatrixSize(n)}},"32x32"),a.a.createElement("button",{className:"resize-btn s32x32",onClick:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;return e.props.changeMatrixSize(n)}},"64x64"),a.a.createElement("button",{className:"resize-btn s128x128",onClick:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128;return e.props.changeMatrixSize(n)}},"128x128")))}}])&&W(n.prototype,r),o&&W(n,o),t}(r.Component),$=n(17);n(57);function ee(e){return a.a.createElement("div",{className:"header"},a.a.createElement("a",{className:"piskel-logo",href:"#"}),a.a.createElement("div",{className:"piskel-user"},e.userName),a.a.createElement("div",{className:"nav-buttons nav-buttons-default"},e.isHome?a.a.createElement($.b,{className:"piskel-button",to:"/create"},"Create"):a.a.createElement("a",{className:"piskel-button  login-button",onClick:e.logout},"Log out")))}n(63);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=re(t).call(this,e))||"object"!==te(a)&&"function"!=typeof a?ae(r):a).showKeys=n.showKeys.bind(ae(n)),n.isShow=!1,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,e),n=t,(r=[{key:"showKeys",value:function(){var e=this.refs.keycommands;this.isShow?(e.removeAttribute("style"),this.isShow=!1):(e.setAttribute("style","display: block"),this.isShow=!0)}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{id:"keycommands",ref:"keycommands"},a.a.createElement("section",{className:"editor-commands"},a.a.createElement("h2",null,"Keyboard shortcuts"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"L - "),"Line"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"C - "),"Color picker"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"F - "),"Fill bucet"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"R - "),"Rectangle"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"E - "),"Eraser"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"N - "),"Add New frame"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"D - "),"Delete active frame"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"P - "),"Duplicate active frame"),a.a.createElement("div",{className:"key-group"},a.a.createElement("span",{className:"command"},"S - "),"Save animation"))),a.a.createElement("button",{className:"modal-btn",onClick:this.showKeys}))}}])&&ne(n.prototype,r),o&&ne(n,o),t}(r.Component);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=le(t).call(this,e))||"object"!==se(a)&&"function"!=typeof a?ue(r):a).state={currentFrame:0,currentTool:"pen",currentCanvasImg:null,currentFrameImg:null,currentColors:{first:"#FF0000",second:"#0000FF"},currentAnimations:null,matrixSize:16},n.setTool=n.setTool.bind(ue(n)),n.setFrame=n.setFrame.bind(ue(n)),n.setImg=n.setImg.bind(ue(n)),n.changeFirstColor=n.changeFirstColor.bind(ue(n)),n.changeSecondColor=n.changeSecondColor.bind(ue(n)),n.setAnimation=n.setAnimation.bind(ue(n)),n.changeMatrixSize=n.changeMatrixSize.bind(ue(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,e),n=t,(r=[{key:"setTool",value:function(e){this.setState({currentTool:e})}},{key:"setFrame",value:function(e,t){this.setState({currentFrame:e,currentFrameImg:t})}},{key:"setImg",value:function(e){this.setState({currentCanvasImg:e})}},{key:"changeFirstColor",value:function(e){this.setState({currentColors:{first:e,second:this.state.currentColors.second}})}},{key:"changeSecondColor",value:function(e){this.setState({currentColors:{first:this.state.currentColors.first,second:e}})}},{key:"setAnimation",value:function(e){this.setState({currentAnimations:e})}},{key:"changeMatrixSize",value:function(e){this.setState({matrixSize:e})}},{key:"logout",value:function(){l.auth().signOut()}},{key:"render",value:function(){return a.a.createElement("div",{className:"wrapper"},a.a.createElement("div",{className:"header-wraper"},a.a.createElement(ee,{logout:this.logout,userName:this.props.userName})),a.a.createElement(T,{setTool:this.setTool,changeFirstColor:this.changeFirstColor,changeSecondColor:this.changeSecondColor,currentColor:this.state.currentColors.first}),a.a.createElement("div",{className:"column-wraper"},a.a.createElement("div",{className:"left-column"},a.a.createElement(H,{setFrame:this.setFrame,currentImage:this.state.currentCanvasImg,setAnimation:this.setAnimation})),a.a.createElement("div",{className:"mian-column"},a.a.createElement(x,{tool:this.state.currentTool,setImg:this.setImg,firstColor:this.state.currentColors.first,img:this.state.currentFrameImg,matrixSize:this.state.matrixSize,changeFirstColor:this.changeFirstColor})),a.a.createElement("div",{className:"right-column"},a.a.createElement(Q,{files:this.state.currentAnimations,changeMatrixSize:this.changeMatrixSize}))),a.a.createElement(ie,null))}}])&&ce(n.prototype,r),o&&ce(n,o),t}(r.Component);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ve(this,ye(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",{className:"wrapper"},a.a.createElement("div",{className:"header-wraper"},a.a.createElement(ee,{isHome:!0,userName:this.props.userName})),a.a.createElement("div",{className:"column-wraper"},a.a.createElement("div",{className:"left-column"}),a.a.createElement("div",{className:"mian-column"},a.a.createElement("h2",{className:"home-information"},"This app is online editor for animated sprites pixel art"),a.a.createElement("div",{className:"home-functionality-overview"},a.a.createElement("p",null,"To create an animation you can use tools such as:"),a.a.createElement("ul",null,a.a.createElement("li",null,"pixel pen"),a.a.createElement("li",null,"pixel line"),a.a.createElement("li",null,"fill bucket"),a.a.createElement("li",null,"color picker"),a.a.createElement("li",null,"eraser")),a.a.createElement("p",null,"You can also change the size of the matrix and create the desired number of frames by copying, adding a new one or deleting old ones."))),a.a.createElement("div",{className:"right-column"},a.a.createElement("img",{src:"assets/icons/piskel-app.PNG"}))),a.a.createElement("h2",null,"Examples"),a.a.createElement("div",{className:"animation-examples"},a.a.createElement("img",{className:"gif-animation",src:"assets/icons/Megamanmoving.gif"}),a.a.createElement("img",{className:"gif-animation",src:"assets/icons/llama.gif"}),a.a.createElement("img",{className:"gif-animation",src:"assets/icons/Panda.gif"}),a.a.createElement("img",{className:"gif-animation",src:"assets/icons/colorpatternclone.gif"}),a.a.createElement("img",{className:"gif-animation",src:"assets/icons/snakes.gif"})),a.a.createElement("div",{className:"about-author"},a.a.createElement("p",null,"The app was created by Dmitry Malakhovsky (",a.a.createElement("a",{href:"https://github.com/DzmitryCavi"},"GitHub"),") during training in RSS")," "))}}])&&he(n.prototype,r),o&&he(n,o),t}(r.Component),ge=n(10);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Se(this,ke(t).call(this))).state={user:null},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;l.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){var e=this;return a.a.createElement($.a,null,a.a.createElement(ge.c,null,a.a.createElement(ge.a,{exact:!0,path:"/",render:function(){return a.a.createElement(be,null)}}),a.a.createElement(ge.a,{exact:!0,path:"/create",render:function(){return e.state.user?a.a.createElement(pe,{userName:e.state.user.email}):a.a.createElement(v,null)}})))}}])&&Ee(n.prototype,r),o&&Ee(n,o),t}(r.Component);i.a.render(a.a.createElement(Oe,null),document.getElementById("root"))}});